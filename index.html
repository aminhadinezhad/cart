<!doctype html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>سبد خرید</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --green-main: #29a33e;
        --green-light: #a8cf45;
        --green-dark: #198754;
        --gray: #96989a;
        --gray-light: #f5f6f7;
        --gray-border: #e8eaec;
        --text-dark: #1a1d20;
        --text-muted: #6c757d;
        --white: #ffffff;
        --shadow-sm: 0 1px 4px rgba(0, 0, 0, 0.06);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.08);
        --radius: 12px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: 'Vazirmatn';
        background: #ffffff;
        color: var(--text-dark);
        min-height: 100vh;
        padding-bottom: 40px;
      }

      .cart-header {
        background: #fff;
        border-bottom: 1px solid var(--gray-border);
        padding: 18px 0;
      }
      .cart-header h1 {
        font-size: 1.35rem;
        font-weight: 700;
        color: var(--text-dark);
        margin: 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .cart-header h1 i {
        color: var(--green-main);
        font-size: 1.3rem;
      }
      .cart-count-badge {
        background: var(--green-light);
        color: #fff;
        font-size: 0.72rem;
        font-weight: 600;
        border-radius: 50px;
        padding: 2px 10px;
        margin-right: 4px;
      }

      .section-card {
        background: #fff;
        border: 1px solid var(--gray-border);
        border-radius: var(--radius);
        padding: 0;
        margin-bottom: 16px;
        overflow: hidden;
        box-shadow: var(--shadow-sm);
      }

      .section-card-header {
        background: var(--gray-light);
        padding: 13px 20px;
        border-bottom: 1px solid var(--gray-border);
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-dark);
        display: flex;
        align-items: center;
        gap: 7px;
      }
      .section-card-header i {
        color: var(--green-main);
      }
      .section-card-body {
        padding: 18px 20px;
      }

      .product-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: 0.88rem;
      }
      .product-table thead th {
        background: var(--gray-light);
        color: var(--text-muted);
        font-weight: 600;
        font-size: 0.78rem;
        padding: 10px 14px;
        white-space: nowrap;
        border-bottom: 1px solid var(--gray-border);
      }
      .product-table tbody td {
        padding: 14px 14px;
        border-bottom: 1px solid var(--gray-border);
        vertical-align: middle;
      }
      .product-table tbody tr:last-child td {
        border-bottom: none;
      }
      .product-table tbody tr {
        transition: background 0.15s;
      }
      .product-table tbody tr:hover {
        background: #fafbfc;
      }

      .product {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .product-img {
        width: 52px;
        height: 52px;
        background: var(--gray-light);
      }
      .product-name {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--text-dark);
      }
      .product-code {
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-top: 3px;
      }

      .qty-control {
        display: flex;
        align-items: center;
        gap: 0;
        border: 1px solid var(--gray-border);
        border-radius: 8px;
        overflow: hidden;
        width: fit-content;
      }
      .qty-btn {
        background: none;
        border: none;
        width: 36px;
        height: 36px;
        font-size: 1rem;
        color: var(--text-dark);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .qty-btn.trash {
        color: #dc3545;
      }
      .qty-btn .bi {
        cursor: pointer;
      }

      .qty-val {
        min-width: 36px;
        text-align: center;
        font-weight: 700;
        font-size: 0.9rem;
        padding: 0 4px;
        border: none;
        outline: none;
        background: #fff;
      }

      .price-col {
        font-weight: 600;
        font-size: 0.95rem;
      }
      .added-val {
        color: var(--green-main);
        font-size: 0.82rem;
        font-weight: 500;
      }

      .total-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 20px;
        background: var(--gray-light);
        border-top: 2px solid var(--green-main);
        font-weight: 700;
        font-size: 1rem;
      }
      .total-amount {
        color: var(--green-dark);
        font-size: 1.1rem;
      }

      .form-select,
      .form-control {
        border-radius: 8px;
        border: 1px solid var(--gray-border);
        font-size: 0.875rem;
        padding: 10px 13px;
        color: var(--text-dark);
        background-repeat: no-repeat;
        background-position: left 0.75rem center;
        background-size: 16px 12px;
      }
      .form-select:focus,
      .form-control:focus {
        border-color: var(--green-main);
        box-shadow: 0 0 0 3px rgba(41, 163, 62, 0.12);
      }
      textarea.form-control {
        min-height: 90px;
        resize: vertical;
      }

      .invoice-toggle {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .invoice-toggle input {
        display: none;
      }
      .toggle-track {
        width: 42px;
        height: 24px;
        background: var(--gray-border);
        border-radius: 50px;
        position: relative;
        transition: background 0.2s;
        cursor: pointer;
      }
      .toggle-track::after {
        content: '';
        position: absolute;
        width: 18px;
        height: 18px;
        background: #fff;
        border-radius: 50%;
        top: 3px;
        right: 3px;
        transition: right 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }
      .invoice-toggle input:checked ~ .toggle-track {
        background: var(--green-main);
      }
      .invoice-toggle input:checked ~ .toggle-track::after {
        right: 21px;
      }
      .toggle-label {
        font-size: 0.875rem;
        font-weight: 500;
      }

      .shipping-info {
        background: linear-gradient(135deg, #f0faf2 0%, #eaf6eb 100%);
        border: 1px solid #c3e6cb;
        border-radius: var(--radius);
        padding: 20px;
      }
      .shipping-info-title {
        font-size: 0.82rem;
        font-weight: 700;
        color: var(--green-dark);
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .shipping-info p {
        font-size: 0.8rem;
        color: #3d6b47;
        margin-bottom: 14px;
        line-height: 1.7;
      }
      .shipping-info p:last-child {
        margin-bottom: 0;
      }

      .btn-main {
        background: var(--green-main);
        color: #fff;
        border: none;
        border-radius: 9px;
        padding: 13px 28px;
        font-size: 0.95rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.18s;
        display: flex;
        align-items: center;
        gap: 7px;
        justify-content: center;
        width: 100%;
      }
      .btn-main:hover {
        background: #228a33;
      }

      .btn-outline-main {
        background: transparent;
        color: var(--green-main);
        border: 1.5px solid var(--green-main);
        border-radius: 9px;
        padding: 12px 28px;
        font-size: 0.88rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.18s;
        display: flex;
        align-items: center;
        gap: 7px;
        justify-content: center;
        width: 100%;
      }
      .btn-outline-main:hover {
        background: var(--green-main);
        color: #fff;
      }

      .empty-cart {
        text-align: center;
        padding: 80px 20px;
        color: var(--text-muted);
      }
      .empty-cart h5 {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 10px;
        color: var(--text-dark);
      }
      .empty-cart a {
        color: var(--gray);
        text-decoration: none;
      }

      .hidden {
        display: none !important;
      }

      @media (max-width: 991.91px) {
        .cart-header h1 {
          font-size: 1.1rem;
        }
        .product-table thead {
          display: none;
        }
        .product-table tbody tr {
          display: block;
          padding: 12px 0;
          border-bottom: 1px solid var(--gray-border);
        }
        .product-table tbody tr:last-child {
          border-bottom: none;
        }
        .product-table tbody td {
          display: flex;
          justify-content: space-between;
          border-bottom: none;
          padding: 7px 14px;
        }
        .product-table tbody td:nth-child(1) {
          display: none;
        }
        .product-table tbody td::before {
          content: attr(data-label);
          font-size: 0.72rem;
          font-weight: bold;
          color: var(--text-muted);
          margin-bottom: 2px;
        }
        .product-img {
          display: none;
        }
        .section-card-body {
          padding: 14px;
        }
        .total-row {
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <header class="cart-header">
      <div class="container">
        <h1>
          <i class="bi bi-cart3"></i>
          سبد خرید
          <span class="cart-count-badge" id="cartBadge">۱</span>
        </h1>
      </div>
    </header>

    <div id="emptyCartFull" class="empty-cart hidden">
      <div>
        <div class="d-flex justify-content-center mb-4">
          <div class="">
            <img
              src="assets/images/basket.png"
              width="190"
              height="190"
              alt=""
            />
          </div>
        </div>
        <h5>سبد خرید شما خالی است!</h5>
        <div class="d-flex align-items-center justify-content-center">
          <a href="https://www.taminfalat.com/">
            <span>مشاهده محصولات بیشتر</span>
            <i class="bi bi-arrow-left"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="container mt-4" id="mainContent">
      <div class="row g-4">
        <div class="col-lg-8 col-md-7">
          <div class="section-card" id="productsCard">
            <div class="section-card-header">
              <i class="bi bi-box-seam"></i> اقلام سبد خرید
            </div>
            <div class="table-responsive">
              <table class="product-table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>عنوان کالا</th>
                    <th>قیمت واحد (تومان)</th>
                    <th>ارزش افزوده</th>
                    <th>تعداد</th>
                    <th>جمع</th>
                  </tr>
                </thead>
                <tbody id="cartBody"></tbody>
              </table>
            </div>
            <div class="total-row" id="totalRow">
              <span
                >جمع کل
                <small
                  style="
                    color: var(--text-muted);
                    font-weight: 400;
                    font-size: 0.75rem;
                  "
                  >(بدون احتساب هزینه ارسال)</small
                ></span
              >
              <span class="total-amount" id="totalAmount"
                >۰
                <small style="font-size: 0.75rem; font-weight: 500"
                  >تومان</small
                ></span
              >
            </div>
          </div>

          <div class="section-card" id="shippingCard">
            <div class="section-card-header">
              <i class="bi bi-truck"></i> اطلاعات ارسال
            </div>
            <div class="section-card-body">
              <div class="shipping-info">
                <div class="shipping-info-title">
                  <i class="bi bi-clock"></i> زمان ارسال
                </div>
                <p>حداقل زمان ارسال ۲۴ و حداکثر ۷۲ ساعت کاری می باشد.</p>

                <div class="shipping-info-title">
                  <i class="bi bi-building"></i> هزینه ارسال به استان های تهران
                  و البرز
                </div>
                <p>
                  هزینه ارسال در استان های فوق، برای سفارش های بالای ۴۰،۰۰۰،۰۰۰
                  تومان رایگان و برای خرید کمتر طبق فرمول (مبدا انبار تا مقصد
                  ارسال سفارش) محاسبه می شود.
                </p>

                <div class="shipping-info-title">
                  <i class="bi bi-map"></i> هزینه ارسال به سایر استان ها
                </div>
                <p>
                  هزینه ارسال سفارش به سایر استان ها (غیر از استان تهران و
                  البرز) برای خرید بیش از ۴۰،۰۰۰،۰۰۰ تومان، تا محل باربری رایگان
                  و برای سفارش هایی کمتر از مبلغ فوق، طبق فرمول (مبدا انبار تا
                  محل باربری) محاسبه می شود. این مبلغ هزینه ارسال تا محل باربری
                  است و کرایه ارسال بین شهری (بین محل باربری و محل دریافت سفارش)
                  در هر دو حالت به عهده مشتریان محترم می باشد.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-5">
          <div class="section-card">
            <div class="section-card-header">
              <i class="bi bi-file-text"></i>
              فاکتور
            </div>
            <div class="section-card-body">
              <div class="invoice-toggle">
                <input type="checkbox" id="invoiceToggle" />
                <span
                  class="toggle-track"
                  onclick="document.getElementById('invoiceToggle').click()"
                ></span>
                <span class="toggle-label">فاکتور برای من ارسال شود</span>
              </div>
            </div>
          </div>

          <div class="section-card">
            <div class="section-card-header">
              <i class="bi bi-geo-alt"></i> محل ارسال
            </div>
            <div class="section-card-body">
              <select class="form-select">
                <option value="" selected>انتخاب کنید</option>
              </select>
            </div>
          </div>

          <div class="section-card">
            <div class="section-card-header">
              <i class="bi bi-credit-card"></i> درگاه پرداخت
            </div>
            <div class="section-card-body">
              <select class="form-select">
                <option value="" selected>انتخاب کنید</option>
                <option value="">درگاه بانک رفاه/سامان</option>
                <option value="">درگاه بانک پاسارگاد</option>
              </select>
            </div>
          </div>

          <div class="section-card">
            <div class="section-card-header">
              <i class="bi bi-pencil-square"></i> توضیحات سفارش
            </div>
            <div class="section-card-body">
              <textarea
                class="form-control"
                placeholder="چنانچه نکته یا نکاتی در خصوص سفارش دارید، اینجا اضافه نمایید."
              ></textarea>
            </div>
          </div>

          <div class="d-flex flex-column gap-2 mt-2" id="actionButtons">
            <button class="btn-outline-main">
              <i class="bi bi-file-text"></i>
              مشاهده پیش فاکتور
            </button>
            <button class="btn-main">
              <i class="bi bi-cart-check"></i>
              ادامه ثبت سفارش
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
      let cart = [
        {
          id: 1,
          code: '۵۲۰۶',
          name: 'ساک دستی تامین فلات',
          unitPrice: 20900,
          tax: 2090,
          qty: 1,
          src: 'assets/images/sNveEorBmyfFFXMcANJO.jpg',
          href: 'https://www.taminfalat.com/product/detail/%D8%B3%D8%A7%DA%A9-%D8%AF%D8%B3%D8%AA%DB%8C-%D8%AA%D8%A7%D9%85%DB%8C%D9%86-%D9%81%D9%84%D8%A7%D8%AA',
        },
      ];

      function toFarsiNum(n) {
        return String(n).replace(/\d/g, d => '۰۱۲۳۴۵۶۷۸۹'[d]);
      }

      function formatPrice(n) {
        return toFarsiNum(n.toLocaleString('en'));
      }

      function renderCart() {
        const tbody = document.getElementById('cartBody');
        tbody.innerHTML = '';

        if (cart.length === 0) {
          document.getElementById('mainContent').classList.add('hidden');
          document.getElementById('emptyCartFull').classList.remove('hidden');
          document.getElementById('cartBadge').textContent = '۰';
          return;
        }

        document.getElementById('mainContent').classList.remove('hidden');
        document.getElementById('emptyCartFull').classList.add('hidden');

        let total = 0;
        cart.forEach((item, idx) => {
          const lineTotal = (item.unitPrice + item.tax) * item.qty;
          total += lineTotal;

          const leftBtn =
            item.qty === 1
              ? `<div class="qty-btn trash" title="حذف از سبد">
                   <i class="bi bi-trash3" onclick="removeItem(${idx})"></i>
                 </div>`
              : `<div class="qty-btn"> 
                   <i class="bi bi-dash" onclick="changeQty(${idx}, -1)"></i>
                 </div>`;

          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td data-label="ردیف">${toFarsiNum(idx + 1)}</td>
            <td data-label="کالا">
              <div class="product">
                <a href="${item.href}">
                  <img class="product-img" src="${item.src}" alt="" />
                </a>
                <div>
                  <div class="product-name">${item.name}</div>
                  <div class="product-code">کد: ${item.code}</div>
                </div>
              </div>
            </td>
            <td data-label="قیمت واحد" class="price-col">${formatPrice(item.unitPrice)}</td>
            <td data-label="ارزش افزوده" class="added-val">${formatPrice(item.tax)}</td>
            <td data-label="تعداد">
              <div class="qty-control">
                 <div class="qty-btn">
                  <i class="bi bi-plus" onclick="changeQty(${idx}, 1)"></i>
                </div>
                <span class="qty-val">${toFarsiNum(item.qty)}</span>
                ${leftBtn}
              </div>
            </td>
            <td data-label="جمع" class="price-col">${formatPrice(lineTotal)}</td>
          `;
          tbody.appendChild(tr);
        });

        document.getElementById('totalAmount').innerHTML =
          `${formatPrice(total)} <small style="font-size:.75rem;font-weight:500">تومان</small>`;
        document.getElementById('cartBadge').textContent = toFarsiNum(
          cart.length,
        );
      }

      function changeQty(idx, delta) {
        cart[idx].qty = Math.max(1, cart[idx].qty + delta);
        renderCart();
      }

      function removeItem(idx) {
        cart.splice(idx, 1);
        renderCart();
      }

      renderCart();
    </script>
  </body>
</html>
